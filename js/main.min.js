function updateViewportDimensions(){var e=window,t=document,o=t.documentElement,i=t.getElementsByTagName("body")[0],n=e.innerWidth||o.clientWidth||i.clientWidth,a=e.innerHeight||o.clientHeight||i.clientHeight;return{width:n,height:a}}function checkform(){for(i=0;i<fieldstocheck.length;i++)if("checkbox"==eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].type")){if(!document.subscribeform.elements[fieldstocheck[i]].checked)return alert("Please enter your "+fieldnames[i]),eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].focus()"),!1}else if(""==eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].value"))return alert("Please enter your "+fieldnames[i]),eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].focus()"),!1;for(i=0;i<groupstocheck.length;i++)if(!checkGroup(groupstocheck[i],groupnames[i]))return!1;return compareEmail()?!0:(alert("Email addresses you entered do not match"),!1)}function addFieldToCheck(e,t){fieldstocheck[fieldstocheck.length]=e,fieldnames[fieldnames.length]=t}function addGroupToCheck(e,t){groupstocheck[groupstocheck.length]=e,groupnames[groupnames.length]=t}function compareEmail(){return document.subscribeform.elements.email.value==document.subscribeform.elements.emailconfirm.value}function checkGroup(e,t){for(option=-1,i=0;i<document.subscribeform.elements[e].length;i++)document.subscribeform.elements[e][i].checked&&(option=i);return-1==option?(alert("Please enter your "+t),!1):!0}var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(t,o,i){i||(i="Don't call this twice without a uniqueId"),e[i]&&clearTimeout(e[i]),e[i]=setTimeout(t,o)}}(),timeToWaitForLast=100;!function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,o=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((e||t||o)&&"undefined"!=typeof document.getElementById){var i=window.addEventListener?"addEventListener":"attachEvent";window[i]("hashchange",function(){var e=document.getElementById(location.hash.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}}();var fieldstocheck=new Array,fieldnames=new Array,groupstocheck=new Array,groupnames=new Array;!function($){function e(e){var t=$(e),o=t.attr("data-src");t.hide().removeAttr("data-src").attr("data-lazy-loaded","true"),e.src=o,t.show()}var t=$(window),o=t.height(),i=$("body");main_accordion=function(){$(".js .accordion").css({display:"block"}),$(".accordion").accordion({active:!1,activate:function(t,o){if(viewport=updateViewportDimensions(),viewport.width<1200){var i=$(this).scrollTop();if(o.newHeader.length>0){var n=$(o.newHeader).offset().top;$("html, body").animate({scrollTop:i+n},500,"easeOutQuart")}else{var n=$(o.oldHeader).offset().top;$("html, body").animate({scrollTop:i+n},500,"easeOutQuart")}}o.newPanel.length>0&&$(o.newPanel).find("iframe[data-src]").each(function(){e(this)}),$(o.oldPanel).find("iframe[data-lazy-loaded]").attr("src",function(e,t){return t})},animate:{easing:"easeOutQuart",duration:500},header:".entry-header",heightStyle:"content",icons:!1,collapsible:!0,create:function(e,t){var o=$(this);$(window).on("hashchange",function(e){var t=$(".accordion").accordion("option","header");header=$(location.hash),index=o.find(t).index(header),index>=0&&o.accordion("option","active",index)}),$(window).trigger("hashchange")}})},reading_accordion=function(){$(".js .accordion-issue").css({display:"block"}),$(".accordion-issue").accordion({animate:{easing:"easeOutQuart",duration:500},header:".editor-title",heightStyle:"content",icons:!1,collapsible:!0,beforeActivate:function(e,t){t.oldPanel.find(".accordion").accordion("option","active",!1)}})},opening_times_accordion=function(){$.fn.accordion&&(reading_accordion(),main_accordion())},mobile_nav=function(){$(".menu-toggle").click(function(e){i.toggleClass("active").css("overflow","hidden"),e.preventDefault(),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){i.css("overflow","visible"),$("body.active").css("overflow","hidden")})}),header_resize=function(){viewport=updateViewportDimensions();var e=$(".site-header");return viewport.width<768?e.addClass("autoheight"):(e.removeClass("autoheight").css("height",""),void i.removeClass("active"))},header_resize(),setDivHeight=function(){$(".autoheight").css("height",$(window).height())},setDivHeight(),$(window).resize(function(){header_resize(),setDivHeight()}),$('<svg version="1.1" id="menu-open" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25px" height="15px" viewBox="0 0 25 15" enable-background="new 0 0 25 15" xml:space="preserve">			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="1" x2="25" y2="1"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="14" x2="25" y2="14"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="7.359" x2="25" y2="7.359"/>		</svg>').appendTo(".menu-toggle")},dropdowns=function(){toggler=function(e){var t=$(this).data().toggleId,o=function(){$(".info-panel").is(":visible")?$("body").addClass("open"):$("body").removeClass("open")};$("#"+t).slideToggle("slow","easeOutQuart",o).siblings().slideUp("slow","easeOutQuart",o),e.preventDefault()},$("[data-toggle-id]").on("click",toggler),$("#info").html($(".info-panel").detach()),$('<svg version="1.1" id="close-cross" class="closer" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve">			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="35" y1="0" x2="0" y2="35"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="0" x2="35" y2="35"/>		</svg>').appendTo(".info-panel"),$(".closer").on("click",function(){$(".info-panel").slideUp("slow"),$("body").removeClass("open")})},layout=function(){function e(){viewport=updateViewportDimensions();var e=$(".social-menu a"),t=$(".social-menu .search-field");viewport.width>768?t.focus(function(){e.hide()}).blur(function(){e.fadeIn(500)}):t.focus(function(){e.show()})}$(".gradienter").rainbow(),$(".fitvids").fitVids({customSelector:"iframe[data-src*='player.vimeo.com'], iframe[data-src*='youtube.com'], iframe[data-src*='youtube-nocookie.com'], iframe[data-src*='kickstarter.com'][data-src*='video.html']"}),$("span.pullquote").each(function(){var e=$(this).parent("p");e.css("position","relative"),$(this).clone().addClass("pulledquote").prependTo(e)}),$(".popout-link a").click(function(){var e=$(window).height()/2-240,t=$(window).width()/2-240,o=window.open($(this).prop("href"),"","height=480, width=480 top="+e+", left= "+t);return window.focus&&o.focus(),!1}),e(),$(window).resize(function(){e()})},layout_hacks=function(){$(".wp-caption").removeAttr("style"),$(".editor-selection > :first-child").addClass("pseudo-content-divider-top-articles-xs-max"),$(".search-field").attr("placeholder","Search")},four_oh_four=function(){$(".page-content .search-field").focus(),$(".site-logo").wrap("<div class='message404'></div>")},input_url_force_protocol=function(){$(".auto-protocol").blur(function(){var e=$(this).val();e.match(/^https?:/)||(e="http://"+e),$(this).val(function(){return e})})},ajax_load=function(){var e=window.History,t=e.getState();ajax_click=function(){$("a[rel=ajax]").on("click",function(t){t.preventDefault();var o=$(this).attr("href"),i=$(this).text()+" - Opening Times";e.pushState("ajax",i,o)}),$(".search-form").submit(function(t){t.preventDefault();var o=$("[name=s]").val(),i="?s="+o,n=o+" - Search Results - Opening Times";e.pushState("ajax",n,i)})},ajax_click(),e.Adapter.bind(window,"statechange",function(){load_ot_ajax()}),callback_scripts=function(){layout_hacks(),layout(),mobile_nav(),i.removeClass("active").css("overflow","visible"),opening_times_accordion(),ajax_click(),input_url_force_protocol()},load_ot_ajax=function(){t=e.getState(),$("body").prepend('<div id="ajax-loader"><span>Loading</span></div>'),$("#ajax-loader").fadeIn(),$("#content").load(t.url+" #content > *",function(e,t,o){if("error"===t){var i="Sorry but there was an error: ",n="Please reload the page.";$("#ajax-loader").wrap("<div id='ajax-error'></div>").html(i+o.status+" "+o.statusText+"<br>"+n)}else $("#ajax-loader").fadeOut("fast",function(){$(this).detach()}),callback_scripts()})}},$('<div id="push"></div>').appendTo("#page"),$(".search-form").height($(".menu-item").height()),$(window).konami({cheat:function(){function e(t){$("body").css({"font-family":t}),setTimeout(function(){e(t)},3200)}i.addClass("konami").append('<audio src="../wp-content/themes/opening_times/assets/timba.mp3" preload="auto" autoplay loop></audio>'),i.ready(function(){setTimeout(function(){e("serif")},400),setTimeout(function(){e("cursive")},800),setTimeout(function(){e("monospace")},1200),setTimeout(function(){e("fantasy")},1600),setTimeout(function(){e("sans-serif")},2e3),setTimeout(function(){e("Symbol")},2400),setTimeout(function(){e("Webdings")},2800),setTimeout(function(){e("Wingdings")},3200)})}});var n=document.querySelector&&document.querySelector('meta[name="viewport"]');preventZoom=function(){if(n&&navigator.platform.match(/iPad|iPhone|iPod/i))for(var e=document.querySelectorAll("input, select, textarea"),t="width=device-width,initial-scale=1,maximum-scale=",o=0,i=e.length,a=function(){n.content=t+"1"},r=function(){n.content=t+"10"};i>o;o++)e[o].onfocus=a,e[o].onblur=r}}(jQuery),jQuery(document).ready(function($){mobile_nav(),layout(),layout_hacks(),preventZoom(),dropdowns(),ajax_load(),input_url_force_protocol(),addFieldToCheck("email","Email address"),addFieldToCheck("emailconfirm","Confirm your email address"),opening_times_accordion(),$("body").hasClass("error404")&&four_oh_four()});