function updateViewportDimensions(){var e=window,t=document,o=t.documentElement,i=t.getElementsByTagName("body")[0],n=e.innerWidth||o.clientWidth||i.clientWidth,a=e.innerHeight||o.clientHeight||i.clientHeight;return{width:n,height:a}}function checkform(){for(i=0;i<fieldstocheck.length;i++)if("checkbox"==eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].type")){if(!document.subscribeform.elements[fieldstocheck[i]].checked)return alert("Please enter your "+fieldnames[i]),eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].focus()"),!1}else if(""==eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].value"))return alert("Please enter your "+fieldnames[i]),eval("document.subscribeform.elements['"+fieldstocheck[i]+"'].focus()"),!1;for(i=0;i<groupstocheck.length;i++)if(!checkGroup(groupstocheck[i],groupnames[i]))return!1;return compareEmail()?!0:(alert("Email addresses you entered do not match"),!1)}function addFieldToCheck(e,t){fieldstocheck[fieldstocheck.length]=e,fieldnames[fieldnames.length]=t}function addGroupToCheck(e,t){groupstocheck[groupstocheck.length]=e,groupnames[groupnames.length]=t}function compareEmail(){return document.subscribeform.elements.email.value==document.subscribeform.elements.emailconfirm.value}function checkGroup(e,t){for(option=-1,i=0;i<document.subscribeform.elements[e].length;i++)document.subscribeform.elements[e][i].checked&&(option=i);return-1==option?(alert("Please enter your "+t),!1):!0}var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(t,o,i){i||(i="Don't call this twice without a uniqueId"),e[i]&&clearTimeout(e[i]),e[i]=setTimeout(t,o)}}(),timeToWaitForLast=100;!function(){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=navigator.userAgent.toLowerCase().indexOf("opera")>-1,o=navigator.userAgent.toLowerCase().indexOf("msie")>-1;if((e||t||o)&&"undefined"!=typeof document.getElementById){var i=window.addEventListener?"addEventListener":"attachEvent";window[i]("hashchange",function(){var e=document.getElementById(location.hash.substring(1));e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}}();var fieldstocheck=new Array,fieldnames=new Array,groupstocheck=new Array,groupnames=new Array;!function(e){function t(t){var o=e(t),i=o.attr("data-src");o.hide().removeAttr("data-src").attr("data-lazy-loaded","true"),t.src=i,o.show()}var o=e(window),i=(o.height(),e("body"));main_accordion=function(){e(".js .accordion").css({display:"block"}),e(".accordion").accordion({active:!1,activate:function(o,i){if(viewport=updateViewportDimensions(),viewport.width<1200){var n=e(this).scrollTop();if(i.newHeader.length>0){var a=e(i.newHeader).offset().top;e("html, body").animate({scrollTop:n+a},500,"easeOutQuart")}else{var a=e(i.oldHeader).offset().top;e("html, body").animate({scrollTop:n+a},500,"easeOutQuart")}}i.newPanel.length>0&&e(i.newPanel).find("iframe[data-src]").each(function(){t(this)}),e(i.oldPanel).find("iframe[data-lazy-loaded]").attr("src",function(e,t){return t})},animate:{easing:"easeOutQuart",duration:500},header:".entry-header",heightStyle:"content",icons:!1,collapsible:!0,create:function(){var t=e(this);e(window).on("hashchange",function(){var o=e(".accordion").accordion("option","header");header=e(location.hash),index=t.find(o).index(header),index>=0&&t.accordion("option","active",index)}),e(window).trigger("hashchange")}})},reading_accordion=function(){e(".js .accordion-issue").css({display:"block"}),e(".accordion-issue").accordion({animate:{easing:"easeOutQuart",duration:500},header:".editor-title",heightStyle:"content",icons:!1,collapsible:!0,beforeActivate:function(e,t){t.oldPanel.find(".accordion").accordion("option","active",!1)}})},opening_times_accordion=function(){e.fn.accordion&&(reading_accordion(),main_accordion())},mobile_nav=function(){e(".menu-toggle").click(function(t){i.toggleClass("active").css("overflow","hidden"),t.preventDefault(),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){i.css("overflow","visible"),e("body.active").css("overflow","hidden")})}),header_resize=function(){viewport=updateViewportDimensions();var t=e(".site-header");return viewport.width<768?t.addClass("autoheight"):(t.removeClass("autoheight").css("height",""),i.removeClass("active"),void 0)},header_resize(),setDivHeight=function(){e(".autoheight").css("height",e(window).height())},setDivHeight(),e(window).resize(function(){header_resize(),setDivHeight()}),e('<svg version="1.1" id="menu-open" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="25px" height="15px" viewBox="0 0 25 15" enable-background="new 0 0 25 15" xml:space="preserve">			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="1" x2="25" y2="1"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="14" x2="25" y2="14"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="7.359" x2="25" y2="7.359"/>		</svg>').appendTo(".menu-toggle")},dropdowns=function(){toggler=function(t){var o=e(this).data().toggleId,i=function(){e(".info-panel").is(":visible")?e("body").addClass("open"):e("body").removeClass("open")};e("#"+o).slideToggle("slow","easeOutQuart",i).siblings().slideUp("slow","easeOutQuart",i),t.preventDefault()},e("[data-toggle-id]").on("click",toggler),e("#info").html(e(".info-panel").detach()),e('<svg version="1.1" id="close-cross" class="closer" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="35px" height="35px" viewBox="0 0 35 35" enable-background="new 0 0 35 35" xml:space="preserve">			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="35" y1="0" x2="0" y2="35"/>			<line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="0" y1="0" x2="35" y2="35"/>		</svg>').appendTo(".info-panel"),e(".closer").on("click",function(){e(".info-panel").slideUp("slow"),e("body").removeClass("open")}),obsfucate_email()},layout=function(){function t(){viewport=updateViewportDimensions();var t=e(".social-menu a"),o=e(".social-menu .search-field");viewport.width>768?o.focus(function(){t.hide()}).blur(function(){t.fadeIn(500)}):o.focus(function(){t.show()})}e(".gradienter").rainbow(),e(".fitvids").fitVids({customSelector:"iframe[data-src*='player.vimeo.com'], iframe[data-src*='youtube.com'], iframe[data-src*='youtube-nocookie.com'], iframe[data-src*='kickstarter.com'][data-src*='video.html']"}),e("span.pullquote").each(function(){var t=e(this).parent("p");t.css("position","relative"),e(this).clone().addClass("pulledquote").prependTo(t)}),e(".popout-link a").click(function(){var t=e(window).height()/2-240,o=e(window).width()/2-240,i=window.open(e(this).prop("href"),"","height=480, width=480 top="+t+", left= "+o);return window.focus&&i.focus(),!1}),t(),e(window).resize(function(){t()})},layout_hacks=function(){e(".wp-caption").removeAttr("style"),e(".editor-selection > :first-child").addClass("pseudo-content-divider-top-articles-xs-max"),e(".search-field").attr("placeholder","Search")},four_oh_four=function(){e(".page-content .search-field").focus(),e(".site-logo").wrap("<div class='message404'></div>")},obsfucate_email=function(){e(".ot-email").each(function(){var t=e(this),o=t.text().replace(/\s*\[at\]\s*/,"@").replace(/\s*\[dot\]\s*/g,".");t.html('<a href="mailto:'+o+'" target="_blank">'+o+"</a>")})},ajax_load=function(){var t=window.History,o=t.getState();ajax_click=function(){e("a[rel=ajax]").on("click",function(o){o.preventDefault();var i=e(this).attr("href"),n=e(this).text()+" - Opening Times";t.pushState("ajax",n,i)}),e(".search-form").submit(function(o){o.preventDefault();var i=e("[name=s]").val(),n="?s="+i,a=i+" - Search Results - Opening Times";t.pushState("ajax",a,n)})},ajax_click(),t.Adapter.bind(window,"statechange",function(){load_ot_ajax()}),callback_scripts=function(){layout_hacks(),layout(),mobile_nav(),i.removeClass("active").css("overflow","visible"),opening_times_accordion(),ajax_click()},load_ot_ajax=function(){o=t.getState(),e("body").prepend('<div id="ajax-loader"><span>Loading</span></div>'),e("#ajax-loader").fadeIn(),e("#content").load(o.url+" #content > *",function(t,o,i){if("error"==o){var n="Sorry but there was an error: ",a="Please reload the page.";e("#ajax-loader").wrap("<div id='ajax-error'></div>").html(n+i.status+" "+i.statusText+"<br>"+a)}else e("#ajax-loader").fadeOut("fast",function(){e(this).detach()}),callback_scripts()})}},e('<div id="push"></div>').appendTo("#page"),e(window).konami({cheat:function(){function t(o){e("body").css({"font-family":o}),setTimeout(function(){t(o)},3200)}i.addClass("konami").append('<audio src="../wp-content/themes/opening_times/assets/timba.mp3" preload="auto" autoplay loop></audio>'),i.ready(function(){setTimeout(function(){t("serif")},400),setTimeout(function(){t("cursive")},800),setTimeout(function(){t("monospace")},1200),setTimeout(function(){t("fantasy")},1600),setTimeout(function(){t("sans-serif")},2e3),setTimeout(function(){t("Symbol")},2400),setTimeout(function(){t("Webdings")},2800),setTimeout(function(){t("Wingdings")},3200)})}});var n=document.querySelector&&document.querySelector('meta[name="viewport"]');preventZoom=function(){if(n&&navigator.platform.match(/iPad|iPhone|iPod/i))for(var e=document.querySelectorAll("input, select, textarea"),t="width=device-width,initial-scale=1,maximum-scale=",o=0,i=e.length,a=function(){n.content=t+"1"},r=function(){n.content=t+"10"};i>o;o++)e[o].onfocus=a,e[o].onblur=r}}(jQuery),jQuery(document).ready(function(e){mobile_nav(),layout(),layout_hacks(),preventZoom(),dropdowns(),ajax_load(),addFieldToCheck("email","Email address"),addFieldToCheck("emailconfirm","Confirm your email address"),opening_times_accordion(),e("body").hasClass("error404")&&four_oh_four()});