!function($){function e(){if(S=document.querySelectorAll("img[data-lazy-src]"),I=S.length,_&&_.disconnect(),"IntersectionObserver"in window)for(_=new IntersectionObserver(n,P),l=0;l<S.length;l++)U=S[l],U.getAttribute("data-lazy-loaded")||_.observe(U);else t(S)}function t(e){var t;for(t=0;t<e.length;t++){o(e[t])}}function n(e){var t;for(0===I&&_.disconnect(),t=0;t<e.length;t++){var n=e[t];n.intersectionRatio>0&&(I--,_.unobserve(n.target),o(n.target))}}function o(e){var t=$(e);t.each(function(){var n=e.getAttribute("data-lazy-src"),o=e.getAttribute("data-lazy-srcset"),i=e.getAttribute("data-lazy-sizes");n&&(t.is("[data-lazy-loaded]")||(e.classList&&e.classList.add("lazy-loaded"),e.setAttribute("data-lazy-loaded","1"),e.setAttribute("src",n),e.removeAttribute("data-lazy-src"),o&&(e.setAttribute("srcset",o),e.removeAttribute("data-lazy-srcset")),i&&(e.setAttribute("sizes",i),e.removeAttribute("data-lazy-sizes"))))})}var i={screen_xl:1200,screen_lg:992,screen_md:768,screen_sm:576,screen_xs:480},a,c=1,s=!1,r=!1,l=0,d=!1,p=!0,f=!1,u,g=$("html, body"),m=$("body"),h=$("#page");$.readyFn={list:[],register:function(e){$.readyFn.list.push(e)},execute:function(){for(var e=0;e<$.readyFn.list.length;e++)try{$.readyFn.list[e].apply(document,[$])}catch(e){throw e}}};var v=function(){var e=!1;return function(t){(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},b=function(e){return e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),RegExp.$3.indexOf("youtu")>-1?a="youtube":RegExp.$3.indexOf("vimeo")>-1&&(a="vimeo"),{type:a,id:RegExp.$6}},w=function(e){switch(e.substr(e.lastIndexOf(".")+1)){case"mp3":case"aac":case"ogg":a="audio";break;case"mp4":case"webm":a="video";break;case"jpg":case"jpeg":case"png":case"gif":a="image";break}return a},y=function(e){var t=$(window).width();return parseInt(t)<=parseInt(e)},x=function(e,t){var n=$(t);e?n.addClass("stop-scroll"):n.removeClass("stop-scroll")},k=function(e,t,n,o){$(".gradient-container").gradienter({hueStart:t,selector:e,saturation:n,lightness:o})},z={init:function(){var e=$("#mailing-list-subscribe"),t=$("#field-ot-mail"),n=$("#field-ot-mail-confirm");this.validate(e,t,n)},validate:function(e,t,n){var o=e[0];o.addEventListener("submit",function(i){!1===o.checkValidity()&&(i.preventDefault(),i.stopPropagation()),$(e).addClass("was-validated"),z.match(t,n)},!1)},match:function(e,t){var n=e[0].value,o=t[0].value,i=t.next(".invalid-feedback");n!==o?i.text(i.data("text-original")):(i.data("text-original",i.text()),i.text(i.data("text-swap")))}},A={config:{$searchWrap:$(".expanding-search"),$expand:$('[data-toggle="search-expand"]'),$input:$(".expanding-search .search-field"),$submit:$(".expanding-search .search-submit"),$menu:$(".navigation-social a")},init:function(e){$.extend(A.config,e);var t=this.config.$expand,n=this.config.$submit;this.bindUIActions(t,n)},bindUIActions:function(e,t){e.on("click",function(e){A.doExpand(e)}),t.on("click",function(e){A.doExpand(e)})},doExpand:function(e){e.stopPropagation(),A.config.$searchWrap.is(".in")?A.config.$searchWrap.is(".in")&&/^\s*$/.test(A.config.$input.val())&&(e.preventDefault(),A.close()):A.open(e)},open:function(e){e.preventDefault(),A.config.$searchWrap.addClass("in"),A.config.$input.focus(),A.config.$menu.addClass("invisible"),$(document).on("click",function(){A.bodyFn(e)})},close:function(){A.config.$searchWrap.removeClass("in"),A.config.$input.blur(),A.config.$menu.removeClass("invisible")},bodyFn:function(e){$(e.target).is(A.config.$input)||(A.close(),$(document).off("click",function(){A.bodyFn(e)}))}},C={config:{prefetch:!0,prefetchOn:"mouseover touchstart",blacklist:".post-edit-link",debug:!0,onBefore:function(e,t){N.config.$container.infiniteScroll("destroy"),M.config.$popMedia.popover("dispose"),$(O.config.section).length&&($.scrollify.move(0),$.scrollify.destroy())},onStart:{duration:1e3,render:function(){h.addClass("is-exiting"),g.animate({scrollTop:0})}},onReady:{duration:0,render:function(e,t){e.html(t),e.removeClass("is-exiting")}},onAfter:function(){m.removeClass("stop-scrolling"),c=1,$.readyFn.execute(),$(W.config.reader).length&&W.refresh()}},init:function(e){$.extend(C.config,e),h.length&&(u=h.smoothState(C.config).data("smoothState"))}},S,P={rootMargin:"200px 0px",threshold:.01},I=0,_,U,M={config:{$pop:$(".popover"),$popMedia:$(".media-sample"),$scene:$("#scene")},init:function(e){$.extend(M.config,e),$('[data-toggle="popover"]').popover(),this.bindUIActions(),this.doMedia()},bindUIActions:function(){M.config.$scene.on("shown.bs.popover",function(){M.doVolumeToggle($(".accordion .show"),.1)}),M.config.$scene.on("hidden.bs.popover",function(){M.doVolumeToggle($(".accordion .show"),.9)})},doVolumeToggle:function(e,t){},doMedia:function(){M.config.$popMedia.each(function(e,t){var n=$(t),o=n.data("media"),i=n.data("position"),c=n.closest(".accordion-header").length?"hover":"click",s;switch(w(o),a){case"audio":s='<audio src="'+o+'" loop autoplay controls controlsList="nodownload"></audio>';break;case"video":s='<video src="'+o+'" loop autoplay></video>';break;case"image":s='<img src="'+o+'">';break}n.popover({placement:i,html:!0,template:'<div class="popover popover--large" role="tooltip"><div class="popover-content"><div class="popover__media-container"></div></div></div>',content:s,trigger:c})})},hide:function(e){if(M.config.$popMedia.length){$(e).find(M.config.$popMedia).popover("hide")}}},F={config:{options:{cellSelector:".carousel-cell",cellAlign:"left",prevNextButtons:!1,pageDots:!1,watchCSS:!0},$newsDropdown:$("#collapse-news"),$carousel:$(".carousel"),$btnNav:$(".btn-nav"),$btnPrev:$(".btn-prev"),$btnNext:$(".btn-next")},init:function(e){$.extend(F.config,e);var t=F.config.$carousel;t&&this.bindUIActions(t)},create:function(e){var t=e.flickity(F.config.options);F.bindEvents(t)},bindUIActions:function(e){F.config.$newsDropdown.one("shown.bs.collapse",function(){F.create(e),e.flickity("resize")}),F.config.$newsDropdown.on("hidden.bs.collapse",function(){F.resetPosition(e)}),F.config.$btnPrev.on("click",function(){e.flickity("previous")}),F.config.$btnNext.on("click",function(){e.flickity("next")})},bindEvents:function(e){var t=e.data("flickity");F.btnAtts(t,F.config.$btnPrev,F.config.$btnNext,F.config.$btnNav),F.addItems(F.config.$carousel,t)},btnAtts:function(e,t,n,o){e.on("cellSelect",function(){var i=e.selectedCell.target,a=!1;i===e.cells[0].target?(a=!a,t.attr("disabled",!0)):i===e.getLastCell().target?(a=!a,n.attr("disabled",!0)):(a=a,o.removeAttr("disabled"))})},addItems:function(e,t){e.on("settle.flickity",function(){t.selectedIndex===t.cells.length-1&&F.makeCellHtml(e)})},makeCellHtml:function(e){c++;var t="/wp-json/wp/v2/news?page="+c;$.getJSON(t).done(function(t){$.each(t,function(t,n){var o=$('<div class="carousel-cell page-'+c+'"><h2 class="entry-header">'+n.title.rendered+'</h2><div class="entry-content">'+n.content.rendered+"</div></div>");e.flickity("append",o)})}).fail(function(e,t,n){var o=t+", "+n;console.log("Request Failed: "+o)})},resetPosition:function(e){e.flickity("select",0,!1,!0)}},N={config:{$container:$(".infinite"),options:{path:".nav-previous a",append:".post",prefill:!0,hideNav:".nav-links",history:!1}},init:function(e){$.extend(N.config,e);var t=N.config.$container;t.length&&(this.create(t),this.bindEvents(t))},create:function(e){e.infiniteScroll(N.config.options)},bindEvents:function(t){t.on("append.infiniteScroll",function(){k(".gradient-text",240,100,50),e(),T.config.$collapse.on("hidden.bs.collapse",function(){D.doPause(this)})})}},T={config:{$collapse:$(".accordion .collapse"),$panelClose:$(".site-info .close"),card:".card"},init:function(e){$.extend(this.config,e),(T.config.$collapse.length||T.config.$panelClose.length)&&this.bindUIActions(T.config.$collapse,T.config.$panelClose)},bindUIActions:function(e,t){e.on("show.bs.collapse",function(){T.toggle(!0,this)}),e.on("shown.bs.collapse",function(){T.doLazyLoad(this),D.doPlay(this,.2)}),e.on("hide.bs.collapse",function(){T.toggle(!1,this),M.hide(this)}),e.on("hidden.bs.collapse",function(){D.doPause(this)}),t.on("click",function(){$(this).closest(".collapse").collapse("hide")})},doLazyLoad:function(e){var t=$(e);if(t.has("[data-lazy-src]").length){t.find("[data-lazy-src]").each(function(){o(this)})}},toggle:function(e,t){var n=$(t);e?n.parent(T.config.card).addClass("show"):n.parent(T.config.card).removeClass("show")}},D={config:{volFadeDuration:1e3,$autoPlay:$(".autoplay")},init:function(e){$.extend(D.config,e),this.setAutoPlay(D.config.$autoPlay)},setAutoPlay:function(e){var t=e.find("iframe");t.attr("data-autoplay",""),v()&&t.length&&D.mobileParams(t)},mobileParams:function(e){e.each(function(e,t){var n=t.attr("src");b(n),"vimeo"===a&&t.attr("src",n.replace("background=1","background=0"))})},doPlay:function(e,t){D.mediaToggle(!0,e,t),D.embedToggle(!0,e)},doPause:function(e){D.mediaToggle(!1,e),D.embedToggle(!1,e)},mediaToggle:function(e,t,n){var o=$(t).find("video, audio");$(o).length&&o.each(function(t,o){var i=$(o),a=i.get(0);e?D.mediaPlay(i,a,n):D.mediaPause(i,a)})},mediaPlay:function(e,t,n){t.hasAttribute("data-autoplay")&&"function"==typeof t.play&&(e.prop("volume",n),0===t.volume?t.play().then(function(){e.animate({volume:n},2*D.config.volFadeDuration)}):t.play())},mediaPause:function(e,t){t.hasAttribute("data-keepplaying")||"function"!=typeof t.pause||e.animate({volume:0},D.config.volFadeDuration,function(){t.pause()})},embedToggle:function(e,t){var n=$(t).find("iframe"),o=n.is(["data-lazy-src"])?n.data("lazy-src"):n.attr("src");$(n).length&&n.each(function(){b(o);var t=n.get(0);e?D.embedPlay(a,t):D.embedPause(a,t)})},embedPlay:function(e,t){"vimeo"===e&&t.hasAttribute("data-autoplay")&&t.contentWindow.postMessage('{"method": "play"}',"*"),"youtube"===e&&t.hasAttribute("data-autoplay")&&t.contentWindow.postMessage('{"event": "command", "func": "playVideo", "args": ""}',"*")},embedPause:function(e,t){"vimeo"!==e||t.hasAttribute("data-keepplaying")||t.contentWindow.postMessage('{"method": "pause"}',"*"),"youtube"!==e||t.hasAttribute("data-keepplaying")||t.contentWindow.postMessage('{"event": "command", "func": "pauseVideo", "args": ""}',"*")}},E=function(e){return e.trim().replace(/([-—])(\w)/g,"$1 $2").replace(/[\r\n]/g," {linebreak} ").replace(/[ \t]{2,}/g," ").split(" ")},O={config:{anchor:!0,section:".scroll-snap .section",sectionName:"anchor",interstitial:".site-header, .issue-content__bio, .site-footer, .spritz",setHeights:!1,activeClass:"active"},init:function(e){$.extend(this.config,e),$(this.config.section).length&&(this.setAnchor(this.config.anchor),$.scrollify({section:this.config.section,sectionName:this.config.sectionName,interstitialSection:this.config.interstitial,before:function(e,t){O.doBefore(e,t,O.config.section,O.config.activeClass),O.doAfter(e,t,O.config.activeClass)}}),this.doUpdate())},doBefore:function(e,t,n,o){void 0!==t[e].attr("data-anchor")&&$(n).removeClass(o)},doAfter:function(e,t,n){$.scrollify.current().addClass(n)},doUpdate:function(){$(".site-info .collapse").on("shown.bs.collapse",function(){$.scrollify.update()}),$(".site-info .collapse").on("hidden.bs.collapse",function(){$.scrollify.update()})},setAnchor:function(e){e&&$(O.config.section).each(function(e,t){var n=$(t),o=e+1;n.attr("data-anchor","page-"+o)})}},R={config:{words:"",$words:$('[data-text="split"] .entry-content > p'),paragraphSm:16,paragraphMd:35},init:function(e){$.extend(this.config,e),$(this.config.$words).length&&R.split(this.config.$words,this.config.words," ")},split:function(e,t,n){e.each(function(e,o){var i=$(o),a=i.text(),c="";t=E(a),R.count(i,t,R.config.paragraphSm,R.config.paragraphMd,e),$(t).each(function(e,t){c+='<span class="word-'+e+'" aria-hidden="true">'+t+"</span>"+n}),R.populate(i,a,"<div>"+c+"</div>")})},count:function(e,t,n,o,i){t.length<parseInt(n)?e.addClass("section section-sm section-"+i):t.length<parseInt(o)?e.addClass("section section-md section-"+i):e.addClass("section section-lg section-"+i)},populate:function(e,t,n){e.attr("aria-label",t).empty().append(n)}},W={config:{container:m,readingProgress:$("#spritz_progress"),reader:$("#spritz"),space:$("#spritz_word"),$words:$('[data-text="split"] .entry-content > p'),spritz:"",words:"",local:{},$wpm:$("#spritz_wpm"),interval:6e4/$("#spritz_wpm").val(),wpmOutput:$("#spritz_wpm").next()[0]},init:function(e){$.extend(W.config,e),$(W.config.reader).length&&(W.wordsSet(),W.wordShow(0),W.wordUpdate(),W.pause(!0))},wordsSet:function(){var e=W.config.$words,t=e.text();W.config.words=E(t);for(var n=1;n<W.config.words.length;n++)W.config.words[n]=W.config.words[n].replace(/{linebreak}/g,"   ")},wordShow:function(e){W.config.readingProgress.width(100*e/W.config.words.length+"%");var t=W.config.words[e];W.config.space.html("<span>"+t+"</span>")},wordNext:function(){l++,W.wordShow(l)},wordPrev:function(){l--,W.wordShow(l)},wordUpdate:function(){W.config.spritz=setInterval(function(){W.wordNext(),l+1===W.config.words.length&&(setTimeout(function(){W.config.space.html(""),W.pause(!0),l=0,W.wordShow(0)},W.config.interval),clearInterval(W.config.spritz))},W.config.interval)},pause:function(){r||(clearInterval(W.config.spritz),r=!0,W.config.container.addClass("paused"))},play:function(){W.wordUpdate(),r=!1,W.config.container.removeClass("paused")},toggle:function(){r?W.play():W.pause()},speed:function(){W.config.interval=6e4/W.config.$wpm.val(),r||(clearInterval(W.config.spritz),W.wordUpdate())},slider:function(){W.config.$wpm.attr("value",W.config.$wpm.val()),W.output(),W.speed()},output:function(){W.config.wpmOutput.value=W.config.$wpm.val()+" words per minute."},refresh:function(){clearInterval(W.config.spritz),W.wordsSet(),l=0,W.pause(),W.wordShow(0)}},j={config:{controls:$(".controls")},init:function(e){$.extend(j.config,e),this.bindUIActions(j.config.controls)},bindUIActions:function(e){e.on("click","#spritz_pause",function(e){e.preventDefault(),W.toggle()}),e.on("input","input[type=range]",function(){W.slider()})}},L={config:{container:m,btnSelect:$("[data-theme]"),content:$('[data-toggle="theme"] .entry-content'),switch:$('[data-toggle="theme"]')},init:function(e){$.extend(L.config,e),L.config.switch&&this.bindUIActions(L.config.btnSelect)},bindUIActions:function(e){e.on("click",function(e){L.readerType(e,this)})},speedReader:function(e){e?(W.config.reader.addClass("in"),W.play(),W.config.wpmOutput.value=W.config.$wpm.val()+" words per minute."):(W.config.reader.removeClass("in"),W.pause()),d=e,x(e,"body")},slides:function(e){if(e){var t=window.location.hash.split("-")[1];L.config.container.addClass("animated"),O.init(),$.scrollify.instantMove(parseInt(t))}else L.config.container.removeClass("animated"),$.scrollify.destroy();p=e},normal:function(e){e?(L.config.content.removeClass("col-md-12"),L.config.content.addClass("col-md-8"),L.config.switch.removeClass("text-size--poster format-slides"),$("html, body").scrollTop(0)):(L.config.content.removeClass("col-md-8"),L.config.content.addClass("col-md-12"),L.config.switch.addClass("text-size--poster format-slides")),f=e},readerType:function(e,t){switch(t.dataset.theme){case"speed":L.speedReader(!0),L.normal(!1),L.slides(!1),L.btnSelected(t);break;case"normal":L.speedReader(!1),L.normal(!0),L.slides(!1),L.btnSelected(t);break;case"animated":L.speedReader(!1),L.normal(!1),L.slides(!0),L.btnSelected(t);break}},btnSelected:function(e){$(L.config.btnSelect).attr("disabled",!1).removeClass("active"),$(e).attr("disabled",!0).addClass("active")}};$.readyFn.register(function(){F.init({$newsDropdown:$("#collapse-news"),$carousel:$(".carousel"),$btnNav:$(".btn-nav"),$btnPrev:$(".btn-prev"),$btnNext:$(".btn-next")}),N.init({$container:$(".infinite")}),M.init({$pop:$(".popover"),$popMedia:$(".media-sample"),$scene:$("#scene")}),T.init({$collapse:$(".accordion .collapse"),$panelClose:$(".site-info .close"),card:".card"}),D.init({volFadeDuration:1e3,$autoPlay:$(".autoplay")}),R.init({words:"",$words:$('[data-text="split"] .entry-content > p')}),W.init({container:$("body"),readingProgress:$("#spritz_progress"),reader:$("#spritz"),space:$("#spritz_word"),$words:$('[data-text="split"] .entry-content > p'),spritz:"",words:"",local:{},$wpm:$("#spritz_wpm"),interval:6e4/$("#spritz_wpm").val(),wpmOutput:$("#spritz_wpm").next()[0]}),j.init({controls:$(".controls")}),O.init(),e(),k(".gradient-text",240,100,50),z.init(),L.init({btnSelect:$("[data-theme]"),content:$('[data-toggle="theme"] .entry-content'),switch:$('[data-toggle="theme"]')}),A.init({$searchWrap:$(".expanding-search"),$expand:$('[data-toggle="search-expand"]'),$input:$(".expanding-search .search-field"),$submit:$(".expanding-search .search-submit"),$menu:$(".navigation-social a")})}),$(document).ready(function(){C.init(),$.readyFn.execute()})}(jQuery);